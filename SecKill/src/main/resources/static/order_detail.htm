<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>订单详情页面</title>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="layer/layer.js"></script>
<link rel="stylesheet" type="text/css"
	href="bootstrap/css/bootstrap.min.css" />

</head>
<body>

	<div class="panel panel-default">
		<div class="panel-heading">秒杀订单详情</div>
		<table class="table" id="goodslist">
			<tr>
				<td>商品名称</td>
				<td colspan="3" id="goodsName"></td>
			</tr>
			<tr>
				<td>商品图片</td>
				<td colspan="2"><img id="goodsImg" width="200" height="200" />
				</td>
			</tr>
			<tr>
				<td>订单价格</td>
				<td colspan="2" id="orderPrice"></td>
			</tr>
			<tr>
				<td>下单时间</td>
				<td id="createDate" colspan="2"></td>
			</tr>
			<tr>
				<td>订单状态</td>
				<td id="orderStatus">
					<!-- 
					<span th:if="${orderInfo.status eq 0}">未支付</span>
					<span th:if="${orderInfo.status eq 1}">待发货</span>
					<span th:if="${orderInfo.status eq 2}">已发货</span>
					<span th:if="${orderInfo.status eq 3}">已收货</span>
					<span th:if="${orderInfo.status eq 4}">已退款</span>
					<span th:if="${orderInfo.status eq 5}">已完成</span>
					 -->
				</td>
				<td>
					<button class="btn btn-primary btn-block" type="submit"
						id="payButton">立即支付</button>
				</td>
			</tr>
			<tr>
				<td>收货人</td>
				<td colspan="2">XXX 18912341234</td>
			</tr>
			<tr>
				<td>收货地址</td>
				<td colspan="2">北京市昌平区回龙观龙博一区</td>
			</tr>
		</table>
	</div>


</body>

<script>

	$(function() {
		getOrderDetail();
	});
	
	function getOrderDetail() {
			var orderId = g_getQueryString("orderId");
			$.ajax({
				url : "/order/detail/" + orderId,
				type : "GET",
// 				data : {
// 					orderId : orderId
// 				},
				success : function(data) {
					if (data.code == 200) {
						render(data.data);
					} else {
						layer.msg(data.message);
					}
				},
				error : function() {
					layer.msg("客户端请求有误");
				}
			});
	}
	
	// 取值，渲染页面
	function render(detail) {
		var goods = detail.goods;
		var order = detail.order;
		
		$("#goodsName").text(goods.name);
		$("#goodsImg").attr("src", goods.image);
		$("#orderPrice").text(order.goodsPrice);
		$("#createDate").text(new Date(order.createDate).format("yyyy-MM-dd hh:mm:ss"));
		// 订单状态
		var status = "";
		if(order.status == 0) {
			status = "未支付";
		}
		if(order.status == 1) {
			status = "待发货";
		}
		if(order.status == 2) {
			status = "已发货";
		}
		if(order.status == 3) {
			status = "已收货";
		}
		if(order.status == 4) {
			status = "已退款";
		}
		if(order.status == 5) {
			status = "已完成";
		}
		$("#orderStatus").text(status);
	
	}


</script>

</html>